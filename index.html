<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>STEAM Quest ğŸŒŸ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
</head>


<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="index.html">STEAM Quest</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu"
        aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="categories.html">Categories</a></li>
          <li class="nav-item"><a class="nav-link" href="progress.html">Progress</a></li>
          <li class="nav-item"><a class="nav-link" href="leaderboard.html">Leaderboard</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <section class="hero-section">
    <div class="container hero-content">
      <div class="row justify-content-center min-vh-100">
        <div class="col-lg-8 text-center">
          <div class="hero-text">
            <h1 class="hero-title">
              <span class="title-main">ğŸŒŸ STEAM Quest</span>
              <span class="title-sub">The Hero's Journey</span>
            </h1>
            <p class="hero-description">
              In a kingdom ruled by logic and love, a young prince embarks on a noble journey.<br>
              Your mission? Master the realms of <strong>STEAM</strong> to win the heart of the brilliant princess.
            </p>
            <div class="hero-stats">
              <div class="stat-item">
                <i class="fas fa-star"></i>
                <span>Earn XP</span>
              </div>
              <div class="stat-item">
                <i class="fas fa-trophy"></i>
                <span>Level Up</span>
              </div>
              <div class="stat-item">
                <i class="fas fa-heart"></i>
                <span>Win Hearts</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CHANGED SINCE PROJECT1, CHANGES IN README FILE-->
  <!-- authentication of user by email and password -->
  <section class="auth-section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
          <div class="auth-container">
            <form id="authForm" class="auth-box" autocomplete="on">
              <div class="auth-header">
                <h2><i class="fas fa-crown"></i> Enter the Kingdom</h2>
                <p>Begin your epic adventure</p>
              </div>

              <div class="mb-3">
                <label for="email" class="form-label">
                  <i class="fas fa-envelope"></i> Email
                </label>
                <input type="email" id="email" name="email" class="form-control" 
                       placeholder="your.email@kingdom.com" autocomplete="email" required />
              </div>

              <div class="mb-3">
                <label for="password" class="form-label">
                  <i class="fas fa-lock"></i> Password
                </label>
                <input type="password" id="password" name="password" class="form-control" 
                       placeholder="Your secret key" autocomplete="current-password" required />
              </div>

              <button type="submit" class="btn btn-primary w-100 auth-btn">
                <i class="fas fa-rocket"></i> Start My Journey!
              </button>

              <div class="text-center mt-3">
                <a href="signup.html" class="btn btn-outline-secondary w-100">
                  <i class="fas fa-user-plus"></i> Create New Account
                </a>
              </div>
              
              <div class="auth-footer">
                <small>Join thousands of heroes on their quest!</small>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- the categories that are included in the project-->
  <section class="features-section py-5">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="section-title">Master the Five Realms</h2>
        <p class="section-subtitle">Each realm holds unique challenges and rewards</p>
      </div>
      
      <div class="row g-4 justify-content-center">
        <div class="col-md-6 col-lg-2">
          <div class="feature-card science">
            <div class="feature-icon">ğŸ”¬</div>
            <h4>Science</h4>
            <p>Discover the mysteries of nature</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-2">
          <div class="feature-card tech">
            <div class="feature-icon">ğŸ’»</div>
            <h4>Technology</h4>
            <p>Master digital innovations</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-2">
          <div class="feature-card engineering">
            <div class="feature-icon">âš™ï¸</div>
            <h4>Engineering</h4>
            <p>Build amazing creations</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-2">
          <div class="feature-card arts">
            <div class="feature-icon">ğŸ¨</div>
            <h4>Arts</h4>
            <p>Express your creativity</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-2">
          <div class="feature-card math">
            <div class="feature-icon">ğŸ§®</div>
            <h4>Mathematics</h4>
            <p>Solve complex puzzles</p>
          </div>
        </div>
        </div>
    </div>
  </section>


  <!-- when the user logs out, the box that appears to alert the user that he has been signed out-->
  <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body text-center">
          <h5 class="modal-title mb-3" id="logoutModalLabel">ğŸ‘‹ You have been signed out.</h5>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>


  <!-- CHANGED SINCE PROJECT1, CHANGES IN README FILE-->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("authForm");

      /*  
         If a user logged in before, I load their email & password automatically  
         so they donâ€™t have to retype them.
      */
      const savedUser = JSON.parse(localStorage.getItem("steam.user") || "null");
      if (savedUser) {
        if (savedUser.email) document.getElementById("email").value = savedUser.email;
        if (savedUser.password) document.getElementById("password").value = savedUser.password;
      }

      /*  
         This handles the login by sending email+password to my backend auth API.
         If valid => I save the returned user in localStorage.
      */ 
      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const email = form.email.value.trim();
        const password = form.password.value.trim();

        if (!email || !password) {
          alert("âš ï¸ Please enter your email and password.");
          return;
        }

        // fetch backend login API
        fetch("http://localhost:5000/api/auth/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        })
        .then(res => res.json())
        .then(data => {
          if (!data.success) {
            alert("âš ï¸ " + data.message);
            return;
          }

          // save user returned from backend into localStorage
          localStorage.setItem("steam.user", JSON.stringify(data.user));

          alert("Welcome!");

          // go to categories page when login is successful 
          window.location.href = "categories.html";
        })
        .catch(err => {
          console.error(err);
          alert("Server error. Please try again later.");
        });
      });

      /*
       i added this section to prevent navigation to protected pages like categories, progress and leaderboard 
       from the home page when user is not logged in yet
      */
      const navLinks = document.querySelectorAll('.nav-link');
      navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href === 'categories.html' || href === 'progress.html' || href === 'leaderboard.html') { // the pages blocked
          link.addEventListener('click', function (ev) {
            const currentUser = JSON.parse(localStorage.getItem('steam.user') || 'null');
            if (!currentUser) { // if the user is not logged in then we will prevent navigation
              ev.preventDefault();
              alert('You must log in or sign up first.');
              // stay on index.html
              return false;
            }
          });
        }
      });
    });
  </script>

  <!-- to include bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- to use the app.js file functionalities -->
  <script src="js/app.js"></script>

  <footer class="text-center py-3 mt-5 border-top">
    <small>Â© 2025 STEAM Quest. Created by Assil Halawi.</small>
  </footer>

</body>
</html>
